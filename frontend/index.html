<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Personal Financial Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
  <script src="main.js" type="module" defer></script>
</head>

<body data-api-base="http://localhost:8000">
  <div class="app">
    <header class="app-header">
      <div>
        <h1>Personal Financial Tool</h1>
        <p>Model multiple scenarios and compare net worth / liquidity trends.</p>
      </div>
      <div class="status" id="status-banner"></div>
    </header>

    <main class="app-grid">
      <section class="panel span-2" data-panel-id="plan">
        <h2>Plan Management</h2>

        <div class="plan-card" id="plan-loader">
          <h3>Plan Loading</h3>
          <label for="saved-plans">Saved Plans</label>
          <div class="plan-select-row">
            <select id="saved-plans"></select>
          </div>
          <div class="plan-loader-actions">
            <button id="load-plan-btn" class="secondary-btn" type="button">Load Plan</button>
            <button id="delete-plan-btn" class="secondary-btn" type="button">Delete Plan</button>
          </div>
          <button id="add-plan-btn" class="primary-btn" type="button">Add New Plan</button>
        </div>

        <div class="plan-card is-hidden" id="plan-editor" hidden>
          <div class="plan-editor-header">
            <h3>Plan Basics & Actions</h3>
            <div class="plan-editor-actions">
              <button id="save-plan-btn" class="secondary-btn" type="button">Save Current Plan</button>
              <button id="save-layout-btn" class="secondary-btn" type="button">Save Layout</button>
            </div>
          </div>
          <div class="form-grid">
            <label for="plan-name">Scenario Name</label>
            <input id="plan-name" type="text" />

            <label for="plan-start-year">Start Year</label>
            <input id="plan-start-year" type="number" min="1900" max="2100" />

            <label for="plan-years">Duration (years)</label>
            <input id="plan-years" type="number" min="1" max="40" />

            <label for="tax-rate">Tax Rate (%)</label>
            <input id="tax-rate" type="number" min="0" max="60" step="0.5" />

            <label for="plan-freq">Granularity</label>
            <select id="plan-freq"></select>
          </div>
        </div>

        <div class="plan-card" id="simulation-box">
          <h3>Simulation & Plotting</h3>
          <p class="plan-note">Run the current plan to update charts and tables.</p>
          <div class="simulation-settings">
            <label for="freq">Granularity</label>
            <select id="freq"></select>
          </div>
          <div class="simulation-controls">
            <button id="run-simulation-btn" class="primary-btn" type="button">Simulate &amp; Plot</button>
            <button id="clear-scenarios" class="secondary-btn" type="button">Clear Results</button>
          </div>
          <div class="scenario-summary">
            <h4>Plotted Scenarios</h4>
            <p id="scenario-list">None yet</p>
          </div>
        </div>
      </section>

      <section class="panel span-2 is-hidden" data-panel-id="plan-basics" id="plan-editor-panel" hidden>
        <div class="plan-editor-header">
          <h2>Plan Basics &amp; Actions</h2>
          <div class="plan-editor-actions">
            <button id="save-plan-btn" class="secondary-btn" type="button">Save Current Plan</button>
            <button id="save-layout-btn" class="secondary-btn" type="button">Save Layout</button>
          </div>
        </div>
        <div class="form-grid">
          <label for="plan-name">Scenario Name</label>
          <input id="plan-name" type="text" />

          <label for="plan-start-year">Start Year</label>
          <input id="plan-start-year" type="number" min="1900" max="2100" />

          <label for="plan-years">Duration (years)</label>
          <input id="plan-years" type="number" min="1" max="40" />

          <label for="tax-rate">Tax Rate (%)</label>
          <input id="tax-rate" type="number" min="0" max="60" step="0.5" />

        </div>
      </section>

      <section class="panel" data-panel-id="accounts">
        <div class="panel-header">
          <h2>Accounts / Assets / Debts</h2>
          <button id="add-account-row" class="secondary-btn" type="button">Add Row</button>
        </div>
        <div id="accounts-table" class="table-wrapper"></div>
      </section>

      <section class="panel" data-panel-id="income">
        <div class="panel-header">
          <h2>Income Streams</h2>
          <button id="add-income-row" class="secondary-btn" type="button">Add Row</button>
        </div>
        <div id="income-table" class="table-wrapper"></div>
      </section>

      <section class="panel" data-panel-id="spending">
        <div class="panel-header">
          <h2>Expense Streams</h2>
          <button id="add-spending-row" class="secondary-btn" type="button">Add Row</button>
        </div>
        <div id="spending-table" class="table-wrapper"></div>
      </section>

      <section class="panel span-2" data-panel-id="networth">
        <h2>Net Worth</h2>
        <div class="chart-container">
          <canvas id="networth-chart"></canvas>
        </div>
      </section>

      <section class="panel span-2" data-panel-id="liquid">
        <h2>Liquid Assets</h2>
        <div class="chart-container">
          <canvas id="liquid-chart"></canvas>
        </div>
      </section>

      <section class="panel span-2" data-panel-id="aggregate">
        <h2>Aggregated Data</h2>
        <div id="aggregate-table" class="aggregate-grid"></div>
      </section>
    </main>
  </div>
</body>

</html>
